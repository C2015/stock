第一个故事是关于谷歌。2003年的时候，我刚开始读金融硕士，我的一个同学就让我买谷歌的股票。当时股价大概是100多美金。我同学说，这个股票会涨到两三百。当时我觉得这个人“失心疯”了，作为一个靠奖学金生活的学生，我当时口袋里一共就6000美金的积蓄。所以我讲，世界上不可能有这么贵的股票。当然，结果你们都知道了，不久之后，谷歌的股价很快就突破了200、400、600，简直就是不断地突破我的心理防线。即使在金融危机期间，也没有再回到200美金以下。
第二个故事是2012年左右，我当时已经回国，在北大任教了。当时茅台的股价已经达到100，市值是不到2000亿。所以当时也有很多人讨论，茅台的股价太贵了。这话听着很熟悉。但是这一次，我没有轻易地下结论，而是把茅台的财报翻了出来，用课本上学到的现金流贴现的方法大略地算了一下，基本上是用的最保守的数据。算出来，到2017年，茅台的市值应该在4000多亿，也就是说5年间茅台应该有2倍多的涨幅。只要市场不发生巨大的结构性改变，买茅台应该是一笔划算的投资。结果到了2017年底，茅台的市值达到8000多亿，远远地超过了我当时的计算。
好，这里边说到的现金流贴现法（Discounted Cash Flow），其实就是一个最经典的绝对估值法。你在教科书上经常会看到的“DCF”就是这种方法，这也是巴菲特最看重的企业内在价值的估算方法。
所以，今天我就要跟你详细地讲解一下，这个方法是怎么使用的。
一、现金流与贴现率
在讲现金流贴现法之前，我们首先要理解两个概念：自由现金流和贴现率。
好，首先来看一下自由现金流。
一个企业的自由现金流，你可以直接理解成，一个企业的经营活动，扣除所有开支以后，可以自由支配的钱。其实就像什么呢？就像你自己的储蓄，税后工资扣除房贷、生活费用等各种开支以后，剩下的这个部分，就是自由现金流。所以一个企业未来自由现金流的总和，就是一个人未来储蓄的总和。
巴菲特有时候也把它称为“股东盈余”，就是说一个公司未来可以替股东净赚到的钱。
但是这里有个问题，就是未来的钱不等于现在的钱，未来的钱需要你耐心等待，而且存在一定的风险，能不能把这些钱拿到手里，还是个未知数。所以，在给企业估值的时候，你需要把未来的这些现金流打一个折扣，折算到当期，也就是折算到现在来，这个折扣率就叫贴现率。那些不确定性大的现金流折扣就大，反之折扣就小。
好了，那把所有折现的这些现金流加起来以后，就得到了公司的估值，所以这就叫做现金流贴现法。
说起来，这个方法算得上是金融正式“登堂入室”，成为一个正经职业的开端。
为什么这么说呢？其实在二十世纪之前，大家都认为，股市就是个赌场，买股票就跟掷骰子、买大小一样，没有谁认为炒股是个正儿八经的职业。直到三十年代，哈佛大学有个博士生，叫威廉姆斯，他写了一篇论文，叫《价值投资理论》。他提出，股票也是一个商品，它是具有内在价值的，而这个内在价值就是一个企业未来能够创造的现金流折现回来的总和，它代表的就是一个企业能够替股东创造的价值。
这个理论提出来以后，“价值投资之父”格雷厄姆，他也提出了一个理论，叫做“市盈率估值理论”。
这两个理论一块儿就成为了证券市场上价值投资的开端。从此以后，所有崇尚价值投资的人都会对这种企业的内部价值非常地重视。
二、DCF
好了，现在你已经理解了现金流和贴现率的概念。下面我就用一个例子来给你具体说明，你怎么用这种现金流贴现法，估算一个股票的内在价值。而这个例子，其实也是巴菲特的一个经典案例。
在1988年底的时候，可口可乐的总市值是163亿美金，当时巴菲特研究这个企业已经很久了。他认为，可口可乐有品牌优势，又有很强的管理层，所以它会持续地创造充沛的现金流。
巴菲特的投资期限是很长的，以10年计算。所以这个时候，他要对可口可乐10年以后的市值做一个估算。
1．确定增长率
好，他怎么估算的呢？首先，他确定可口可乐公司的增长率，这个增长率要确定两个增长率，一个是未来10年的增长率，一个是10年之后的增长率。
首先他预估，在下一个10年，可口可乐会保持15%左右的增长，这个15%左右的增长可不是空穴来风给编排出来的，而是在之前的7年，可口可乐保持了20%左右的增长率，所以巴菲特给出了15%这么一个相对保守的估测。至于10年以后的增长率，巴菲特认为，15%这样的增长率不可能持续，所以给了一个5%的永续增长率，也就是他认为可口可乐在未来会永远以5%的速度持续增长下去。好，这是确定了增长率。
2．确定贴现率
确定增长率以后，巴菲特还要确定“贴现率”。巴菲特给出的贴现率是当时美国的长期国债利率，也就是9%。
好，确定了增长率、贴现率，以后的工作就比较简单了。首先巴菲特用1988年可口可乐的自由现金流为起点，按照15%的增长率，算出未来10年，每一年的自由现金流。然后，再用9%的贴现率，算出这些钱折回今天的价格。接着按照5%的增长率用一个永续现金流的公式就可以算出可口可乐在第11年以后的所有的现金流。
那这个值算出来是多少呢？巴菲特算的是484亿美金。
这个算术不复杂，用一个简单的Excel就可以算出来。



这个484亿美金，和当时可口可乐163亿的市值相比，几乎是3倍 。所以老巴认为，可口可乐的股价是被严重低估的，就开始大量地买入。很明显，巴菲特是做对了。
到10年以后，也就是1998年的时候，可口可乐的市值涨了11倍，远远超过巴菲特所计算的内在价值。
好，这里多提一句，其实在你动手估值的时候，怎么选择增长率和贴现率，讲究很多。我在后面两周的课程里，还要给你继续讲解。
如果试手的话，给你一些简单的提示，比如当你要给一个公司估值，增长率方面，你不妨参考它前面几年的平均增长率，然后给出一个相对保守的估计。贴现率你可以看一看整个市场的平均回报率，然后以它作为贴现率的参考值。
当然，有同学说，我一看数学就很害怕，就不愿意计算，其实也不要紧，忽略掉计算这一部分，也不会影响到你对现金流贴现这个方法的理解。
三、绝对估值法的意义和局限
这个方法不单单为股票，而且几乎是为所有的资产提供了一个估算内在价值的简单框架，包括人力资本。我们平时都有这种去银行贷款的经验。其实在银行贷款的时候，它就会按照你现在的收入、年龄，计算你未来的现金流，然后再确定你的偿债能力，其实这也是现金流贴现的变种。
正是由于这种极度简单的实用性，这个方法就受到了很多人的追捧。而金融业也从此慢慢地从赌博、游戏的非正当行业，逐渐变成了价值发现的行业。
说完了现金流贴现这个方法的好处以后，你意识到没有，这个方法其实也有很大的局限性。
你看，巴菲特这么牛的人，他的估值虽然说在正确的方向上，但是一点也不准确，和后来的实际价值其实差别是很大的。
那为什么巴菲特的估值会和实际价值出入这么大呢？这是因为这个模型的结果主要取决于我们估计的增长率和贴现率的数值。假设宏观或者企业的基本面发生很大的改变，整个结果就可能发生巨大改变。要是可口可乐推出的产品取得成功，远远超过15%的增速，或者说预见了百事可乐的强劲挑战，增速下滑到10%，这样一来，整个企业的价值就会远远地偏离你的估计了。
除了增长率以外，贴现率的计算也很复杂，因为它反映的是企业的风险。而企业的风险，不是一个静态的概念，它会随着企业的经营、行业的变化、负债率等很多因素变化。只要贴现率略略发生一点变化，整个的估值也会发生很大的变化。
所以说，如果增长率和贴现率估算得不准的话，那你的估值自然也不会特别准确。这就是告诉你，任何一个估值模型，给你提供的一定不会是千篇一律的答案，它给你的是什么呢？给你的是一个判断的基准，让你的投资决策能够找到一个靶心，而不是无的放矢。
